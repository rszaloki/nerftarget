<link rel="import" href="../../bower_components/polymer/polymer.html">

<dom-module id="nerftarget-graph">
    <template>
        <style>
            :host {
                 display:block;
            }
        </style>
        <canvas width="400" height="200"></canvas>
    </template>
    <script>
        Polymer({
            is:'nerftarget-graph',
            properties: {
                series: {
                    type:Array,
                    value:[]
                }
            },
            rafId: null,
            observers: [
                'repaint(series.splices)'
            ],
            ready: function(){
                this.canvas = this.$$('canvas');
            },
            repaint: function() {
                if(!this.rafId && this.canvas) {
                    this.rafId = window.requestAnimationFrame(this.paint.bind(this));
                }
            },
            paint: function() {
                let ctx = this.canvas.getContext('2d');
                let i;
                this.canvas.width=400;
                ctx.beginPath();
                for(i=0; i< this.series.length; i++) {
                    ctx.moveTo(i, 200);
                    ctx.lineTo(i,200-this.series[i]);
                }
                ctx.stroke();
                this.rafId = null;
            }
        })
    </script>
</dom-module>